package com.apkupdater.adapter;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

import android.content.Context;
import android.support.annotation.NonNull;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;

import com.apkupdater.model.Update;
import com.apkupdater.view.UpdaterView;
import com.apkupdater.view.UpdaterView_;

import org.androidannotations.annotations.EBean;
import org.androidannotations.annotations.RootContext;

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@EBean
public class UpdaterAdapter
	extends ArrayAdapter<Update>
{
	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	@RootContext
	Context context;

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	UpdaterAdapter(
			Context context
	) {
		super(context, 0);
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	@Override
	@NonNull
	public View getView(
		int position,
		View convertView,
		@NonNull ViewGroup parent
	) {
		UpdaterView update;

		if (convertView == null) {
			update = UpdaterView_.build(context);
		} else {
			update = (UpdaterView) convertView;
		}

		update.bind(getItem(position));

		return update;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	public Update[] getValues(
	) {
		Update [] values = new Update[getCount()];
		for (int i = 0; i < getCount(); i++) {
			values[i] = getItem(i);
		}
		return values;
	}

	////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
}

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

